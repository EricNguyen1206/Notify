exports.id=764,exports.ids=[764],exports.modules={4502:(a,b,c)=>{"use strict";c.d(b,{p:()=>g});var d=c(54986),e=c(57011),f=c(24183);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-chat border border-input bg-transparent px-3 py-2 text-base font-normal shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-chat-primary disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));g.displayName="Input"},9800:(a,b,c)=>{"use strict";c.d(b,{Dx:()=>i,_q:()=>k,rU:()=>j});var d=c(46731),e=c(56304);let f=async a=>{let{data:b}=await e.u.post("/auth/signin",a);return b},g=async a=>{let{data:b}=await e.u.post("/auth/signup",a);return b},h=async()=>{let{data:a}=await e.u.post("/auth/signout");return a},i=a=>(0,d.n)({mutationKey:["auth","signin"],mutationFn:f,...a}),j=a=>(0,d.n)({mutationKey:["auth","signup"],mutationFn:g,...a}),k=a=>(0,d.n)({mutationKey:["auth","signout"],mutationFn:h,...a})},10734:(a,b,c)=>{"use strict";c.d(b,{Bx:()=>B,Yv:()=>G,CG:()=>F,Cn:()=>H,O_:()=>J,jj:()=>I,Gh:()=>E,SidebarInset:()=>D,wZ:()=>K,Uj:()=>N,FX:()=>L,n:()=>O,SidebarProvider:()=>A,SidebarTrigger:()=>C,cL:()=>z});var d=c(54986),e=c(40977),f=c(92574),g=c(10874),h=c(57011),i=c(40412),j=c(4502),k=c(12463),l=c(17896),m=c(24856),n=c(24183);let o=l.bL;l.l9,l.bm;let p=l.ZL,q=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));q.displayName=l.hJ.displayName;let r=(0,f.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),s=h.forwardRef(({side:a="right",className:b,children:c,...e},f)=>(0,d.jsxs)(p,{children:[(0,d.jsx)(q,{}),(0,d.jsxs)(l.UC,{ref:f,className:(0,n.cn)(r({side:a}),b),...e,children:[(0,d.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,d.jsx)(m.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]}),c]})]}));s.displayName=l.UC.displayName;let t=({className:a,...b})=>(0,d.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});t.displayName="SheetHeader";let u=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(l.hE,{ref:c,className:(0,n.cn)("text-lg font-semibold text-foreground",a),...b}));u.displayName=l.hE.displayName;let v=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(l.VY,{ref:c,className:(0,n.cn)("text-sm text-muted-foreground",a),...b}));v.displayName=l.VY.displayName;var w=c(32849),x=c(26883);let y=h.createContext(null);function z(){let a=h.useContext(y);if(!a)throw Error("useSidebar must be used within a SidebarProvider.");return a}let A=h.forwardRef(({defaultOpen:a=!0,open:b,onOpenChange:c,className:e,style:f,children:g,...i},j)=>{let k=function(){let[a,b]=h.useState(void 0),[c,d]=h.useState(!1);return h.useEffect(()=>{d(!0);let a=window.matchMedia("(max-width: 767px)"),c=()=>{b(window.innerWidth<768)};return a.addEventListener("change",c),b(window.innerWidth<768),()=>a.removeEventListener("change",c)},[]),!!c&&!!a}(),[l,m]=h.useState(!1),[o,p]=h.useState(a),q=b??o,r=h.useCallback(a=>{let b="function"==typeof a?a(q):a;c?c(b):p(b),document.cookie=`sidebar_state=${b}; path=/; max-age=604800`},[c,q]),s=h.useCallback(()=>k?m(a=>!a):r(a=>!a),[k,r,m]);h.useEffect(()=>{let a=a=>{"b"===a.key&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),s())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]);let t=q?"expanded":"collapsed",u=h.useMemo(()=>({state:t,open:q,setOpen:r,isMobile:k,openMobile:l,setOpenMobile:m,toggleSidebar:s}),[t,q,r,k,l,m,s]);return(0,d.jsx)(y.Provider,{value:u,children:(0,d.jsx)(x.Bc,{delayDuration:0,children:(0,d.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...f},className:(0,n.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",e),ref:j,...i,children:g})})})});A.displayName="SidebarProvider";let B=h.forwardRef(({side:a="left",variant:b="sidebar",collapsible:c="offcanvas",className:e,children:f,...g},h)=>{let{isMobile:i,state:j,openMobile:k,setOpenMobile:l}=z();return"none"===c?(0,d.jsx)("div",{className:(0,n.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",e),ref:h,...g,children:f}):i?(0,d.jsx)(o,{open:k,onOpenChange:l,...g,children:(0,d.jsxs)(s,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:a,children:[(0,d.jsxs)(t,{className:"sr-only",children:[(0,d.jsx)(u,{children:"Sidebar"}),(0,d.jsx)(v,{children:"Displays the mobile sidebar."})]}),(0,d.jsx)("div",{className:"flex h-full w-full flex-col",children:f})]})}):(0,d.jsxs)("div",{ref:h,className:"group peer hidden text-sidebar-foreground md:block","data-state":j,"data-collapsible":"collapsed"===j?c:"","data-variant":b,"data-side":a,children:[(0,d.jsx)("div",{className:(0,n.cn)("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===b||"inset"===b?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,d.jsx)("div",{className:(0,n.cn)("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex","left"===a?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===b||"inset"===b?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",e),...g,children:(0,d.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:f})})]})});B.displayName="Sidebar";let C=h.forwardRef(({className:a,onClick:b,...c},e)=>{let{toggleSidebar:f}=z();return(0,d.jsxs)(i.$,{ref:e,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,n.cn)("h-7 w-7",a),onClick:a=>{b?.(a),f()},...c,children:[(0,d.jsx)(g.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});C.displayName="SidebarTrigger",h.forwardRef(({className:a,...b},c)=>{let{toggleSidebar:e}=z();return(0,d.jsx)("button",{ref:c,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:e,title:"Toggle Sidebar",className:(0,n.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",a),...b})}).displayName="SidebarRail";let D=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("main",{ref:c,className:(0,n.cn)("relative flex w-full flex-1 flex-col bg-background h-screen","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...b}));D.displayName="SidebarInset",h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(j.p,{ref:c,"data-sidebar":"input",className:(0,n.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",a),...b})).displayName="SidebarInput";let E=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"header",className:(0,n.cn)("flex flex-col gap-2 p-2",a),...b}));E.displayName="SidebarHeader";let F=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"footer",className:(0,n.cn)("flex flex-col gap-2 p-2",a),...b}));F.displayName="SidebarFooter",h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(k.Separator,{ref:c,"data-sidebar":"separator",className:(0,n.cn)("mx-2 w-auto bg-sidebar-border",a),...b})).displayName="SidebarSeparator";let G=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"content",className:(0,n.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...b}));G.displayName="SidebarContent";let H=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"group",className:(0,n.cn)("relative flex w-full min-w-0 flex-col p-2",a),...b}));H.displayName="SidebarGroup";let I=h.forwardRef(({className:a,asChild:b=!1,...c},f)=>{let g=b?e.DX:"div";return(0,d.jsx)(g,{ref:f,"data-sidebar":"group-label",className:(0,n.cn)("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...c})});I.displayName="SidebarGroupLabel";let J=h.forwardRef(({className:a,asChild:b=!1,...c},f)=>{let g=b?e.DX:"button";return(0,d.jsx)(g,{ref:f,"data-sidebar":"group-action",className:(0,n.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...c})});J.displayName="SidebarGroupAction",h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"group-content",className:(0,n.cn)("w-full text-sm",a),...b})).displayName="SidebarGroupContent";let K=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("ul",{ref:c,"data-sidebar":"menu",className:(0,n.cn)("flex w-full min-w-0 flex-col gap-1",a),...b}));K.displayName="SidebarMenu";let L=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("li",{ref:c,"data-sidebar":"menu-item",className:(0,n.cn)("group/menu-item relative",a),...b}));L.displayName="SidebarMenuItem";let M=(0,f.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),N=h.forwardRef(({asChild:a=!1,isActive:b=!1,variant:c="default",size:f="default",tooltip:g,className:h,...i},j)=>{let k=a?e.DX:"button",{isMobile:l,state:m}=z(),o=(0,d.jsx)(k,{ref:j,"data-sidebar":"menu-button","data-size":f,"data-active":b,className:(0,n.cn)(M({variant:c,size:f}),h),...i});return g?("string"==typeof g&&(g={children:g}),(0,d.jsxs)(x.m_,{children:[(0,d.jsx)(x.k$,{asChild:!0,children:o}),(0,d.jsx)(x.ZI,{side:"right",align:"center",hidden:"collapsed"!==m||l,...g})]})):o});N.displayName="SidebarMenuButton",h.forwardRef(({className:a,asChild:b=!1,showOnHover:c=!1,...f},g)=>{let h=b?e.DX:"button";return(0,d.jsx)(h,{ref:g,"data-sidebar":"menu-action",className:(0,n.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",c&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...f})}).displayName="SidebarMenuAction",h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,"data-sidebar":"menu-badge",className:(0,n.cn)("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...b})).displayName="SidebarMenuBadge";let O=h.forwardRef(({className:a,showIcon:b=!1,...c},e)=>{let f=h.useMemo(()=>"70%",[]);return(0,d.jsxs)("div",{ref:e,"data-sidebar":"menu-skeleton",className:(0,n.cn)("flex h-8 items-center gap-2 rounded-md px-2",a),...c,children:[b&&(0,d.jsx)(w.E,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,d.jsx)(w.E,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":f}})]})});O.displayName="SidebarMenuSkeleton",h.forwardRef(({className:a,...b},c)=>(0,d.jsx)("ul",{ref:c,"data-sidebar":"menu-sub",className:(0,n.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...b})).displayName="SidebarMenuSub",h.forwardRef(({...a},b)=>(0,d.jsx)("li",{ref:b,...a})).displayName="SidebarMenuSubItem",h.forwardRef(({asChild:a=!1,size:b="md",isActive:c,className:f,...g},h)=>{let i=a?e.DX:"a";return(0,d.jsx)(i,{ref:h,"data-sidebar":"menu-sub-button","data-size":b,"data-active":c,className:(0,n.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===b&&"text-xs","md"===b&&"text-sm","group-data-[collapsible=icon]:hidden",f),...g})}).displayName="SidebarMenuSubButton"},12463:(a,b,c)=>{"use strict";c.d(b,{Separator:()=>h});var d=c(54986),e=c(57011),f=c(17928),g=c(24183);let h=e.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...e},h)=>(0,d.jsx)(f.b,{ref:h,decorative:c,orientation:b,className:(0,g.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...e}));h.displayName=f.b.displayName},13188:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(54986),e=c(57011);let f=({children:a})=>{let b=(()=>{let[a,b]=(0,e.useState)(null),[c,d]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{d(!0);let a=()=>{b(window.innerWidth)};return b(window.innerWidth),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),c)&&a||1024})(),[c,f]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{f(!0)},[]),c&&b<700)?(0,d.jsx)("div",{className:"w-full h-screen flex justify-center items-center bg-primary-purple",children:(0,d.jsx)("p",{className:"text-xl font-bold",children:"App is not available on mobile"})}):(0,d.jsx)(d.Fragment,{children:a})}},16780:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(1404).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/templates/ScreenProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/templates/ScreenProvider.tsx","default")},17490:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationsData=b.ApplicationFileType=void 0;let d=c(52521);b.ApplicationFileType=["docx","xlsx","pdf","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.spreadsheetml.sheet"],b.ConversationsData=[{id:"1",name:"chat-room-1",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")},{id:"2",name:"chat-room-2",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")},{id:"3",name:"study-chat-1",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")},{id:"4",name:"study-chat-2",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")},{id:"5",name:"coding-challenge-1",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")},{id:"6",name:"coding-challenge-2",type:d.ConversationType.GROUP,ownerId:"1",createdAt:new Date("2024-01-01")}]},19421:(a,b,c)=>{"use strict";c.d(b,{KN:()=>h.ConnectionState,Us:()=>i});var d=c(90610),e=c(28516),f=c(16006),g=c(52207),h=c(52521);let i=(0,d.v)()((0,e.lt)((a,b)=>({connectionState:h.ConnectionState.DISCONNECTED,error:null,isConnecting:!1,socket:null,userId:"",username:"",url:"",connect:async(c,d)=>{let{socket:e,connectionState:i}=b();if(i===h.ConnectionState.CONNECTING)throw Error("Connection already in progress");if(!(i===h.ConnectionState.CONNECTED&&e?.connected)){e&&e.disconnect();try{a({connectionState:h.ConnectionState.CONNECTING,error:null,isConnecting:!0,userId:c});let e="http://localhost:8080/api/v1";return a({url:e}),new Promise((c,i)=>{let j=(0,f.io)(e,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,timeout:1e4,auth:{token:d}});a({socket:j}),j.on(h.SocketEvent.CONNECT,()=>{console.log("Socket.IO connected and authenticated successfully"),a({connectionState:h.ConnectionState.CONNECTED,isConnecting:!1}),b().setupEventHandlers();try{let a=g.w.getState().getJoinedConversations();a.length>0&&(console.log("Re-joining conversations:",a),a.forEach(a=>{b().joinConversation(a)}))}catch(a){console.error("Auto re-join conversations failed:",a)}c()}),j.on(h.SocketEvent.CONNECTION_ERROR,b=>{console.error("Socket.IO connection error:",b),a({connectionState:h.ConnectionState.ERROR,error:b.message||"Connection failed",isConnecting:!1}),i(b)}),j.on(h.SocketEvent.DISCONNECT,b=>{console.log("Socket.IO disconnected:",b),a({connectionState:h.ConnectionState.DISCONNECTED,isConnecting:!1})}),j.on(h.SocketEvent.ERROR,b=>{console.error("Socket.IO error:",b),a({error:b.message}),("AUTH_FAILED"===b.code||"AUTH_ERROR"===b.code)&&(a({connectionState:h.ConnectionState.ERROR,isConnecting:!1}),i(Error(b.message)))}),setTimeout(()=>{if(b().connectionState===h.ConnectionState.CONNECTING){j.disconnect();let b=Error("Connection timeout");a({connectionState:h.ConnectionState.ERROR,error:"Connection timeout",isConnecting:!1}),i(b)}},15e3)})}catch(b){throw a({connectionState:h.ConnectionState.ERROR,error:b instanceof Error?b.message:"Connection failed",isConnecting:!1}),b}}},setupEventHandlers:()=>{let{socket:a}=b();a&&(a.on(h.SocketEvent.NEW_MESSAGE,a=>{console.log("New message received:",a),window.dispatchEvent(new CustomEvent("chat-message",{detail:{message:a,conversationId:a.conversationId}}))}),a.on(h.SocketEvent.JOINED_CONVERSATION,a=>{console.log("Joined conversation:",a),window.dispatchEvent(new CustomEvent("ws-conversation-join-ack",{detail:{conversationId:a.conversation_id,userId:a.user_id}}))}),a.on(h.SocketEvent.LEFT_CONVERSATION,a=>{console.log("Left conversation:",a),window.dispatchEvent(new CustomEvent("ws-conversation-leave-ack",{detail:{conversationId:a.conversation_id,userId:a.user_id}}))}),a.on(h.SocketEvent.USER_JOINED,a=>{console.log("User joined conversation:",a),window.dispatchEvent(new CustomEvent("ws-user-joined",{detail:a}))}),a.on(h.SocketEvent.USER_LEFT,a=>{console.log("User left conversation:",a),window.dispatchEvent(new CustomEvent("ws-user-left",{detail:a}))}))},disconnect:()=>{let{socket:c}=b();c&&c.disconnect(),a({connectionState:h.ConnectionState.DISCONNECTED,error:null,isConnecting:!1,socket:null})},sendMessage:(c,d,e,f)=>{let{socket:g,connectionState:i}=b();if(!g||i!==h.ConnectionState.CONNECTED||!g.connected)throw Error("Socket.IO not connected");try{let a=(0,h.createSendMessagePayload)(parseInt(c),d||null,e||null,f||null);g.emit(h.SocketEvent.SEND_MESSAGE,a)}catch(b){throw a({error:b instanceof Error?b.message:"Failed to send message"}),b}},joinConversation:c=>{let{socket:d,connectionState:e}=b();if(!d||e!==h.ConnectionState.CONNECTED||!d.connected)throw Error("Socket.IO not connected");try{let a=(0,h.createJoinConversationPayload)(parseInt(c));d.emit(h.SocketEvent.JOIN_CONVERSATION,a);try{g.w.getState().addJoinedConversation(c)}catch(a){console.error("Failed to track joined conversation:",a)}}catch(b){throw a({error:b instanceof Error?b.message:"Failed to join conversation"}),b}},leaveConversation:a=>{let{socket:c,connectionState:d}=b();if(c&&d===h.ConnectionState.CONNECTED)try{let b=(0,h.createLeaveConversationPayload)(parseInt(a));c.emit(h.SocketEvent.LEAVE_CONVERSATION,b);try{g.w.getState().removeJoinedConversation(a)}catch(a){console.error("Failed to untrack joined conversation:",a)}}catch(a){console.error("Failed to leave conversation:",a)}},isConnected:()=>{let{socket:a,connectionState:c}=b();return c===h.ConnectionState.CONNECTED&&a?.connected===!0}}),{name:"socket-store"}))},19753:(a,b,c)=>{"use strict";c.d(b,{Separator:()=>d});let d=(0,c(1404).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/separator.tsx","Separator")},20380:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>n,Es:()=>p,HM:()=>l,L3:()=>q,c7:()=>o,lG:()=>i,zM:()=>j});var d=c(54986),e=c(17896),f=c(24856),g=c(57011),h=c(24183);let i=e.bL,j=e.l9,k=e.ZL,l=e.bm,m=g.forwardRef(({className:a,...b},c)=>(0,d.jsx)(e.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));m.displayName=e.hJ.displayName;let n=g.forwardRef(({className:a,children:b,...c},g)=>(0,d.jsxs)(k,{children:[(0,d.jsx)(m,{}),(0,d.jsxs)(e.UC,{ref:g,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(e.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(f.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));n.displayName=e.UC.displayName;let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});o.displayName="DialogHeader";let p=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});p.displayName="DialogFooter";let q=g.forwardRef(({className:a,...b},c)=>(0,d.jsx)(e.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));q.displayName=e.hE.displayName,g.forwardRef(({className:a,...b},c)=>(0,d.jsx)(e.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b})).displayName=e.VY.displayName},22340:(a,b,c)=>{"use strict";c.d(b,{d2:()=>l,m8:()=>k,sg:()=>j});var d=c(77765),e=c(46731),f=c(56304);let g=async()=>{let{data:a}=await f.u.get("/users/profile");return a.data},h=async a=>{let{data:b}=await f.u.get("/users/search",{params:{username:a}});return b},i=async a=>{let{data:b}=await f.u.put("/users/profile",a);return b.data},j=a=>(0,d.I)({queryKey:["user","current"],queryFn:g,staleTime:3e5,retry:(a,b)=>b.response?.status!==401&&a<2,...a}),k=a=>(0,d.I)({queryKey:["users","search",a],queryFn:()=>h(a),enabled:!!a&&a.length>=2,staleTime:3e4}),l=a=>(0,e.n)({mutationKey:["users","profile","update"],mutationFn:i,...a})},24183:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f}),c(66751);var d=c(9638),e=c(27026);function f(...a){return(0,e.QP)((0,d.$)(a))}},26883:(a,b,c)=>{"use strict";c.d(b,{Bc:()=>h,ZI:()=>k,k$:()=>j,m_:()=>i});var d=c(54986),e=c(57011),f=c(33733),g=c(24183);let h=f.Kq,i=f.bL,j=f.l9,k=e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(f.ZL,{children:(0,d.jsx)(f.UC,{ref:e,sideOffset:b,className:(0,g.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...c})}));k.displayName=f.UC.displayName},32849:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(54986),e=c(24183);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("animate-pulse rounded-chat bg-chat-primary/10",a),...b})}},33048:(a,b,c)=>{"use strict";c.d(b,{CW:()=>o,Hy:()=>q,Pp:()=>n,SW:()=>m,t7:()=>p});var d=c(77765),e=c(46731),f=c(56304);let g=["conversations"],h=async()=>{let{data:a}=await f.u.get("/conversations");return a.data},i=async a=>{let{data:b}=await f.u.get(`/conversations/${a}`);return b.data},j=async a=>{let{data:b}=await f.u.post("/conversations",a);return b.data},k=async a=>{let{data:b}=await f.u.delete(`/conversations/${a}`);return b},l=async a=>{let{data:b}=await f.u.put(`/conversations/${a}/user`,{});return b},m=a=>(0,d.I)({queryKey:g,queryFn:h,staleTime:3e4,...a}),n=(a,b)=>(0,d.I)({queryKey:[...g,a],queryFn:()=>i(a),enabled:!!a,...b}),o=a=>(0,e.n)({mutationKey:["conversations","create"],mutationFn:j,...a}),p=a=>(0,e.n)({mutationKey:["conversations","delete"],mutationFn:k,...a}),q=a=>(0,e.n)({mutationKey:["conversations","leave"],mutationFn:l,...a})},34884:(a,b,c)=>{"use strict";c.d(b,{MessagesLayoutClient:()=>d});let d=(0,c(1404).registerClientReference)(function(){throw Error("Attempted to call MessagesLayoutClient() from the server but MessagesLayoutClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/templates/MessagesLayoutClient.tsx","MessagesLayoutClient")},35462:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},39841:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.FriendRequestStatus=void 0,function(a){a.PENDING="pending",a.ACCEPTED="accepted",a.DECLINED="declined"}(c||(b.FriendRequestStatus=c={}))},40412:(a,b,c)=>{"use strict";c.d(b,{$:()=>j});var d=c(54986),e=c(40977),f=c(92574),g=c(57011),h=c(24183);let i=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-chat text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-chat-primary disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-chat-primary text-white shadow hover:bg-chat-secondary",destructive:"bg-chat-error text-white shadow-sm hover:bg-chat-error/90",outline:"border border-chat-border bg-background shadow-sm hover:bg-chat-accent/10 hover:text-chat-primary hover:border-chat-primary",secondary:"bg-chat-secondary text-white shadow-sm hover:bg-chat-secondary/80",ghost:"hover:bg-chat-accent/10 hover:text-chat-primary",link:"text-chat-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-chat px-3 text-sm",lg:"h-12 rounded-chat px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=g.forwardRef(({className:a,variant:b,size:c,asChild:f=!1,...g},j)=>{let k=f?e.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},41256:(a,b)=>{"use strict";var c,d;function e(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}Object.defineProperty(b,"__esModule",{value:!0}),b.SocketEvent=b.ConnectionState=void 0,b.createSocketMessage=function(a){return{id:e(),timestamp:Date.now(),data:a}},b.createJoinConversationPayload=function(a){return{conversation_id:a}},b.createLeaveConversationPayload=function(a){return{conversation_id:a}},b.createJoinedConversationPayload=function(a,b,c){return{conversation_id:a,user_id:b,username:c}},b.createLeftConversationPayload=function(a,b,c){return{conversation_id:a,user_id:b,username:c}},b.createSendMessagePayload=function(a,b,c,d){return{conversation_id:a,text:b||null,url:c||null,fileName:d||null}},b.createMessageDto=function(a,b,c,d,e,f,g,h,i,j){let k={id:a,conversationId:b,senderId:c,senderName:d,text:f||null,url:g||null,fileName:h||null,createdAt:i||new Date().toISOString()};return e&&(k.senderAvatar=e),void 0!==j&&(k.updatedAt=j),k},b.createUserJoinedPayload=function(a,b,c){return{conversation_id:a,user_id:b,username:c}},b.createUserLeftPayload=function(a,b,c){return{conversation_id:a,user_id:b,username:c}},b.createErrorPayload=function(a,b,c){return{code:a,message:b,...c&&{details:c}}},b.generateMessageId=e,b.isJoinConversationPayload=function(a){return"object"==typeof a&&"number"==typeof a.conversation_id},b.isLeaveConversationPayload=function(a){return"object"==typeof a&&"number"==typeof a.conversation_id},b.isSendMessagePayload=function(a){return"object"==typeof a&&"number"==typeof a.conversation_id&&(void 0!==a.text||void 0!==a.url||void 0!==a.fileName)},function(a){a.DISCONNECTED="disconnected",a.CONNECTING="connecting",a.CONNECTED="connected",a.ERROR="error"}(c||(b.ConnectionState=c={})),function(a){a.CONNECT="connect",a.DISCONNECT="disconnect",a.JOIN_CONVERSATION="join_conversation",a.LEAVE_CONVERSATION="leave_conversation",a.JOINED_CONVERSATION="joined_conversation",a.LEFT_CONVERSATION="left_conversation",a.SEND_MESSAGE="send_message",a.NEW_MESSAGE="new_message",a.USER_JOINED="user_joined",a.USER_LEFT="user_left",a.ERROR="error",a.CONNECTION_ERROR="connect_error"}(d||(b.SocketEvent=d={}))},42798:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ConversationType=void 0,function(a){a.DIRECT="direct",a.GROUP="group"}(c||(b.ConversationType=c={}))},49311:(a,b,c)=>{"use strict";c.d(b,{MessagesLayoutClient:()=>j});var d=c(54986),e=c(22340),f=c(57011),g=c(19421);let h=(0,f.memo)(function({userId:a,token:b,children:c}){let{connect:e,disconnect:h,isConnected:i}=(0,g.Us)();return(0,f.useRef)(!1),(0,d.jsx)(d.Fragment,{children:c})});function i({userId:a,accessToken:b,children:c}){return(0,d.jsx)(h,{userId:a,token:b,children:c})}function j({accessToken:a,children:b}){let{data:c,isLoading:f,error:g}=(0,e.sg)();if(f)return(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("p",{className:"text-lg text-gray-500",children:"Loading..."})});if(g||!c||!c.id)return(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("p",{className:"text-lg text-gray-500",children:"Unauthorized. Please log in."})});if(!a)return(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("p",{className:"text-lg text-gray-500",children:"No access token. Please log in again."})});let h=c.id;return(0,d.jsx)(i,{userId:h,accessToken:a,children:b})}},50949:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>w,metadata:()=>v});var d=c(18968),e=c(99814),f=c(16780),g=c(65801),h=c(89792),i=c(17902),j=(c(88707),c(56689));let k=g.forwardRef(({...a},b)=>(0,d.jsx)("nav",{ref:b,"aria-label":"breadcrumb",...a}));k.displayName="Breadcrumb";let l=g.forwardRef(({className:a,...b},c)=>(0,d.jsx)("ol",{ref:c,className:(0,j.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a),...b}));l.displayName="BreadcrumbList";let m=g.forwardRef(({className:a,...b},c)=>(0,d.jsx)("li",{ref:c,className:(0,j.cn)("inline-flex items-center gap-1.5",a),...b}));m.displayName="BreadcrumbItem";let n=g.forwardRef(({asChild:a,className:b,...c},e)=>{let f=a?h.DX:"a";return(0,d.jsx)(f,{ref:e,className:(0,j.cn)("transition-colors hover:text-foreground",b),...c})});n.displayName="BreadcrumbLink";let o=g.forwardRef(({className:a,...b},c)=>(0,d.jsx)("span",{ref:c,role:"link","aria-disabled":"true","aria-current":"page",className:(0,j.cn)("font-normal text-foreground",a),...b}));o.displayName="BreadcrumbPage";let p=({children:a,className:b,...c})=>(0,d.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,j.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",b),...c,children:a??(0,d.jsx)(i.A,{})});p.displayName="BreadcrumbSeparator";var q=c(19753),r=c(67040),s=c(34884),t=c(90412);async function u(){let a=await (0,t.UL)();return a.get("accessToken")?.value}let v={title:"Notify | Messages",description:"Developed by ericnguyen1206"};async function w({children:a}){let b=await u();return(0,d.jsx)(f.default,{children:(0,d.jsx)(s.MessagesLayoutClient,{accessToken:b,children:(0,d.jsxs)(r.SidebarProvider,{children:[(0,d.jsx)(e.default,{}),(0,d.jsxs)(r.SidebarInset,{children:[(0,d.jsx)("header",{className:"flex h-12 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12 border-b border-chat-border bg-background",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 px-chat-outer",children:[(0,d.jsx)(r.SidebarTrigger,{className:"-ml-1"}),(0,d.jsx)(q.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4 bg-chat-border"}),(0,d.jsx)(k,{children:(0,d.jsxs)(l,{children:[(0,d.jsx)(m,{className:"hidden md:block",children:(0,d.jsx)(n,{href:"/messages",className:"font-normal",children:"Conversation"})}),(0,d.jsx)(p,{className:"hidden md:block"}),(0,d.jsx)(m,{children:(0,d.jsx)(o,{className:"font-medium",children:"#conversation-id"})})]})})]})}),(0,d.jsx)("div",{className:"w-full h-full flex overflow-y-auto bg-background",children:a})]})]})})})}},52207:(a,b,c)=>{"use strict";c.d(b,{w:()=>d});let d=(0,c(90610).v)((a,b)=>({unreadCounts:{},activeConversationId:null,currentConversation:null,groupConversations:[],directConversations:[],currentConversationId:null,joinedConversations:new Set,setUnreadCount:(b,c)=>a(a=>({unreadCounts:{...a.unreadCounts,[b]:c}})),setActiveConversation:b=>a({activeConversationId:b}),setCurrentConversation:b=>a({currentConversation:b}),markAsRead:b=>a(a=>({unreadCounts:{...a.unreadCounts,[b]:0}})),setGroupConversations:b=>a({groupConversations:b}),setDirectConversations:b=>a({directConversations:b}),addGroupConversation:b=>a(a=>({groupConversations:[...a.groupConversations,b]})),addDirectConversation:b=>a(a=>({directConversations:[...a.directConversations,b]})),removeConversation:(b,c)=>a(a=>({groupConversations:"group"===c?a.groupConversations.filter(a=>a.id!==b):a.groupConversations,directConversations:"direct"===c?a.directConversations.filter(a=>a.id!==b):a.directConversations})),setCurrentConversationId:b=>{a({currentConversationId:b})},addJoinedConversation:b=>{a(a=>{let c=new Set(a.joinedConversations);return c.add(b),{joinedConversations:c}})},removeJoinedConversation:b=>{a(a=>{let c=new Set(a.joinedConversations);return c.delete(b),{joinedConversations:c,currentConversationId:a.currentConversationId===b?null:a.currentConversationId}})},clearJoinedConversations:()=>{a({joinedConversations:new Set,currentConversationId:null})},getCurrentConversationId:()=>b().currentConversationId,isInConversation:a=>b().joinedConversations.has(a),getJoinedConversations:()=>Array.from(b().joinedConversations),isCurrentConversation:a=>b().currentConversationId===a}))},52521:(a,b,c)=>{"use strict";var d=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]},e=function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(85466),b),e(c(42798),b),e(c(35462),b),e(c(39841),b),e(c(54024),b),e(c(41256),b)},54024:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},54822:(a,b,c)=>{Promise.resolve().then(c.bind(c,87450)),Promise.resolve().then(c.bind(c,49311)),Promise.resolve().then(c.bind(c,13188)),Promise.resolve().then(c.bind(c,12463)),Promise.resolve().then(c.bind(c,10734))},56304:(a,b,c)=>{"use strict";c.d(b,{u:()=>d});let d=c(30921).A.create({baseURL:"http://localhost:8080/api/v1",timeout:1e4,withCredentials:!0}),e=!1,f=[],g=(a,b=null)=>{f.forEach(c=>{a?c.reject(a):c.resolve(b)}),f=[]};d.interceptors.request.use(a=>a,a=>{throw console.error("\uD83D\uDEA8 Axios Request Error:",a),a}),d.interceptors.response.use(a=>a,async a=>{let b=a.config;if(a.response?.status===401&&!b._retry){if(e)return new Promise((a,c)=>{f.push({resolve:c=>{b.headers=b.headers||{},a(d(b))},reject:c})});b._retry=!0,e=!0;try{return await d.post("/auth/refresh"),g(null,null),d(b)}catch(a){throw g(a,null),a}finally{e=!1}}throw a})},60099:(a,b,c)=>{"use strict";c.d(b,{I:()=>m,SQ:()=>n,_2:()=>o,lp:()=>p,mB:()=>q,rI:()=>k,ty:()=>l});var d=c(54986),e=c(57011),f=c(71346),g=c(18276),h=c(56392),i=c(21402),j=c(24183);let k=f.bL,l=f.l9,m=f.YJ;f.ZL,f.Pb,f.z6,e.forwardRef(({className:a,inset:b,children:c,...e},h)=>(0,d.jsxs)(f.ZP,{ref:h,className:(0,j.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...e,children:[c,(0,d.jsx)(g.A,{className:"ml-auto"})]})).displayName=f.ZP.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.G5,{ref:c,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...b})).displayName=f.G5.displayName;let n=e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(f.ZL,{children:(0,d.jsx)(f.UC,{ref:e,sideOffset:b,className:(0,j.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...c})}));n.displayName=f.UC.displayName;let o=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.q7,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",b&&"pl-8",a),...c}));o.displayName=f.q7.displayName,e.forwardRef(({className:a,children:b,checked:c,...e},g)=>(0,d.jsxs)(f.H_,{ref:g,checked:c??!1,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...e,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(h.A,{className:"h-4 w-4"})})}),b]})).displayName=f.H_.displayName,e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.hN,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=f.hN.displayName;let p=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.JU,{ref:e,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c}));p.displayName=f.JU.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b}));q.displayName=f.wv.displayName},66751:(a,b,c)=>{"use strict";var d=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]},e=function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(75996),b),e(c(81030),b),e(c(17490),b)},67040:(a,b,c)=>{"use strict";c.d(b,{SidebarInset:()=>e,SidebarProvider:()=>f,SidebarTrigger:()=>g});var d=c(1404);(0,d.registerClientReference)(function(){throw Error("Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","Sidebar"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarContent() from the server but SidebarContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarContent"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarFooter() from the server but SidebarFooter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarFooter"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarGroup() from the server but SidebarGroup is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarGroup"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarGroupAction() from the server but SidebarGroupAction is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarGroupAction"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarGroupContent() from the server but SidebarGroupContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarGroupContent"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarGroupLabel() from the server but SidebarGroupLabel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarGroupLabel"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarHeader() from the server but SidebarHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarHeader"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarInput() from the server but SidebarInput is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarInput");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarInset() from the server but SidebarInset is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarInset");(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenu() from the server but SidebarMenu is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenu"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuAction() from the server but SidebarMenuAction is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuAction"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuBadge() from the server but SidebarMenuBadge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuBadge"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuButton() from the server but SidebarMenuButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuButton"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuItem() from the server but SidebarMenuItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuItem"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuSkeleton() from the server but SidebarMenuSkeleton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuSkeleton"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuSub() from the server but SidebarMenuSub is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuSub"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuSubButton() from the server but SidebarMenuSubButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuSubButton"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarMenuSubItem() from the server but SidebarMenuSubItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarMenuSubItem");let f=(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarProvider() from the server but SidebarProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarRail() from the server but SidebarRail is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarRail"),(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarSeparator() from the server but SidebarSeparator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarSeparator");let g=(0,d.registerClientReference)(function(){throw Error("Attempted to call SidebarTrigger() from the server but SidebarTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","SidebarTrigger");(0,d.registerClientReference)(function(){throw Error("Attempted to call useSidebar() from the server but useSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/ui/sidebar.tsx","useSidebar")},72112:()=>{},75996:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InternalServerError=b.RateLimitError=b.ConflictError=b.NotFoundError=b.ForbiddenError=b.UnauthorizedError=b.ValidationError=void 0,b.isOperationalError=function(a){return"isOperational"in a&&!0===a.isOperational},b.isValidationError=function(a){return a instanceof c},b.isUnauthorizedError=function(a){return a instanceof d},b.isForbiddenError=function(a){return a instanceof e},b.isNotFoundError=function(a){return a instanceof f},b.isConflictError=function(a){return a instanceof g},b.isRateLimitError=function(a){return a instanceof h};class c extends Error{constructor(a,b){super(a),this.field=b,this.statusCode=400,this.isOperational=!0,this.name="ValidationError"}}b.ValidationError=c;class d extends Error{constructor(a="Unauthorized"){super(a),this.statusCode=401,this.isOperational=!0,this.name="UnauthorizedError"}}b.UnauthorizedError=d;class e extends Error{constructor(a="Forbidden"){super(a),this.statusCode=403,this.isOperational=!0,this.name="ForbiddenError"}}b.ForbiddenError=e;class f extends Error{constructor(a="Not found"){super(a),this.statusCode=404,this.isOperational=!0,this.name="NotFoundError"}}b.NotFoundError=f;class g extends Error{constructor(a="Conflict"){super(a),this.statusCode=409,this.isOperational=!0,this.name="ConflictError"}}b.ConflictError=g;class h extends Error{constructor(a="Rate limit exceeded"){super(a),this.statusCode=429,this.isOperational=!0,this.name="RateLimitError"}}b.RateLimitError=h;class i extends Error{constructor(a="Internal server error"){super(a),this.statusCode=500,this.isOperational=!0,this.name="InternalServerError"}}b.InternalServerError=i},81030:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.formatDateStr=b.getSummaryName=b.censorPassword=void 0,b.censorPassword=a=>{if(!a)return a;let b=Math.floor(.7*a.length),c=Math.floor(Math.random()*(a.length-b+1));return a.substring(0,c)+"*".repeat(b)+a.substring(c+b)},b.getSummaryName=a=>{if(void 0!==a.split(" ")[1]){let b=a.split(" ");return b[b.length-1].charAt(0)}return a.charAt(0)},b.formatDateStr=a=>{let b=new Date(a),c=b.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});return c+" "+b.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"})}},85466:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},86135:(a,b,c)=>{"use strict";c.d(b,{BK:()=>i,eu:()=>h,q5:()=>j});var d=c(54986),e=c(57011),f=c(70367),g=c(24183);let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.bL,{ref:c,className:(0,g.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));h.displayName=f.bL.displayName;let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f._V,{ref:c,className:(0,g.cn)("aspect-square h-full w-full",a),...b}));i.displayName=f._V.displayName;let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.H4,{ref:c,className:(0,g.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));j.displayName=f.H4.displayName},86366:(a,b,c)=>{Promise.resolve().then(c.bind(c,99814)),Promise.resolve().then(c.bind(c,34884)),Promise.resolve().then(c.bind(c,16780)),Promise.resolve().then(c.bind(c,19753)),Promise.resolve().then(c.bind(c,67040))},87450:(a,b,c)=>{"use strict";c.d(b,{default:()=>ac});var d=c(54986),e=c(33048),f=c(52207),g=(c(19421),c(52521)),h=c(57011);let i=(a,b)=>Array.isArray(a)?a.map(a=>({id:String(a.id??""),name:a.name,ownerId:String(a.ownerId??""),createdAt:a.createdAt||new Date,type:"group"===b?g.ConversationType.GROUP:g.ConversationType.DIRECT,avatar:a.avatar||""})):[];var j=c(13019),k=c(46442),l=c(13479),m=c(64738),n=c(90402),o=c(39223),p=c(92975),q=c(86135),r=c(28261),s=c(74236),t=c(34634),u=c(60099),v=c(10734),w=c(73073);let x=(0,c(23151).UU)("https://fnpwltjofxlcwvqqzgak.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZucHdsdGpvZnhsY3d2cXF6Z2FrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYzNDUxOTMsImV4cCI6MjA2MTkyMTE5M30.xTAU26PmDFW2LVyrHb_SlZbd2sz53z44k4W_jj1Mxyo"),y=async(a,b,c)=>{let d=c.type.split("/")[1],{data:e,error:f}=await x.storage.from(a).upload(`${b}/file_${Date.now()}.${d}`,c,{cacheControl:"3600",upsert:!1});return f?(console.error("Error uploading file:",f.message),null):(console.log("File uploaded successfully:",e),e)};var z=c(20380),A=c(4502),B=c(40412),C=c(73021),D=c(92574),E=c(24183);let F=(0,D.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=h.forwardRef(({className:a,...b},c)=>(0,d.jsx)(C.b,{ref:c,className:(0,E.cn)(F(),a),...b}));G.displayName=C.b.displayName;var H=c(22340),I=c(77278);let J=({children:a,open:b,onOpenChange:c})=>{let{data:e}=(0,H.sg)(),f=(0,I.jE)(),[g,i]=(0,h.useState)({username:"",password:"",currentPassword:""}),[j,k]=(0,h.useState)(!1),[l,m]=(0,h.useState)(null),n=(0,h.useRef)(null),o=(0,H.d2)(),p=async a=>{if(a.preventDefault(),!g.currentPassword)return void t.oR.error("Current password is required");let b=!1,d={currentPassword:g.currentPassword};if(null!==l){k(!0);let a=await y("uploads","public",l),{fullPath:c}=a;if(null===a){t.oR.error("Upload image failed"),k(!1);return}d.avatar=`https://fnpwltjofxlcwvqqzgak.supabase.co/storage/v1/object/public/${c}`,b=!0}if(g.username&&""!==g.username.trim()&&(d.username=g.username.trim(),b=!0),g.password&&""!==g.password.trim()&&(d.password=g.password.trim(),b=!0),!b){t.oR.error("Please make at least one change"),k(!1);return}k(!0);try{await o.mutateAsync(d),t.oR.success("Profile updated successfully"),f.invalidateQueries({queryKey:["user","current"]}),k(!1),c?.(!1)}catch(a){k(!1)}};return(0,d.jsxs)(z.lG,{open:b??!1,onOpenChange:c??(()=>{}),children:[(0,d.jsx)(z.zM,{asChild:!0,children:(0,d.jsx)("div",{children:a})}),(0,d.jsxs)(z.Cf,{className:"max-w-md",children:[(0,d.jsx)(z.c7,{children:(0,d.jsxs)(z.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(w.A,{size:20}),"Edit Profile"]})}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,d.jsxs)(q.eu,{className:"w-20 h-20",children:[(0,d.jsx)(q.BK,{src:e?.avatar,alt:"avatar"}),(0,d.jsx)(q.q5,{className:"text-2xl",children:e?.username&&e.username[0]?.toUpperCase()})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"font-semibold text-lg",children:e?.username}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:e?.email})]})]}),(0,d.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(G,{htmlFor:"username",children:"New Username"}),(0,d.jsx)(A.p,{id:"username",type:"text",placeholder:"Enter new username (optional)",value:g.username,onChange:a=>i({...g,username:a.target.value})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(G,{htmlFor:"avatar",children:"New Avatar"}),(0,d.jsx)(A.p,{id:"avatar",type:"file",accept:"image/*",ref:n,onChange:a=>{m(a.target.files[0])}})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(G,{htmlFor:"password",children:"New Password"}),(0,d.jsx)(A.p,{id:"password",type:"password",placeholder:"Enter new password (optional)",value:g.password,onChange:a=>i({...g,password:a.target.value})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(G,{htmlFor:"currentPassword",children:"Current Password *"}),(0,d.jsx)(A.p,{id:"currentPassword",type:"password",placeholder:"Enter current password (required)",value:g.currentPassword,onChange:a=>i({...g,currentPassword:a.target.value}),required:!0})]}),(0,d.jsx)(B.$,{type:"submit",className:"w-full",disabled:j,children:j?"Updating...":"Update Profile"})]})]})]})};var K=c(9800);let L=()=>{let{data:a,isLoading:b}=(0,H.sg)(),c=(0,s.useRouter)(),{theme:e,setTheme:f}=(0,r.D)(),[g,i]=(0,h.useState)(!1),j=(0,I.jE)(),k=(0,K._q)({onSuccess:()=>{j.clear(),t.oR.success("Sign out successfully"),c.replace("/login")},onError:()=>{t.oR.error("An error occurred during sign out")}}),{isMobile:w}=(0,v.cL)();return(0,d.jsxs)(v.wZ,{children:[(0,d.jsx)(v.FX,{children:(0,d.jsxs)(u.rI,{children:[(0,d.jsx)(u.ty,{asChild:!0,children:(0,d.jsxs)(v.Uj,{size:"lg",className:"h-[40px] data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[(0,d.jsxs)(q.eu,{className:"h-8 w-8 rounded-lg",children:[a&&(0,d.jsx)(q.BK,{src:a.avatar||void 0,alt:a.username}),(0,d.jsx)(q.q5,{className:"rounded-lg",children:a?.username?.[0]?.toUpperCase()||"U"})]}),(0,d.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,d.jsx)("span",{className:"truncate font-medium",children:a?.username??(b?"Loading...":"User")}),(0,d.jsx)("span",{className:"truncate text-xs",children:a?.email??""})]}),(0,d.jsx)(l.A,{className:"ml-auto size-4"})]})}),(0,d.jsxs)(u.SQ,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg border-gray-200 bg-white dark:bg-primary-purple",side:w?"bottom":"right",align:"end",sideOffset:8,children:[(0,d.jsx)(u.lp,{className:"p-0 font-normal",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[(0,d.jsxs)(q.eu,{className:"h-8 w-8 rounded-lg",children:[a&&(0,d.jsx)(q.BK,{src:a.avatar||void 0,alt:a.username}),(0,d.jsx)(q.q5,{className:"rounded-lg",children:a?.username?.[0]?.toUpperCase()||"U"})]}),(0,d.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,d.jsx)("span",{className:"truncate font-medium",children:a?.username??(b?"Loading...":"User")}),(0,d.jsx)("span",{className:"truncate text-xs",children:a?.email??""})]})]})}),(0,d.jsx)(u.mB,{}),(0,d.jsxs)(u.I,{children:[(0,d.jsxs)(u._2,{onClick:()=>i(!0),children:[(0,d.jsx)(m.A,{}),"Account"]}),(0,d.jsxs)(u._2,{onClick:()=>f("dark"===e?"light":"dark"),children:["dark"===e?(0,d.jsx)(n.A,{className:"h-4 w-4"}):(0,d.jsx)(o.A,{className:"h-4 w-4"}),"dark"===e?"Light Mode":"Dark Mode"]})]}),(0,d.jsx)(u.mB,{}),(0,d.jsxs)(u._2,{onClick:()=>{k.mutate()},children:[(0,d.jsx)(p.A,{}),"Log out"]})]})]})}),(0,d.jsx)(J,{open:g,onOpenChange:i,children:(0,d.jsx)("div",{})})]})};var M=c(66070),N=c(24856);let O=(0,D.F)("inline-flex items-center rounded-chat border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-chat-primary focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-chat-primary text-white shadow hover:bg-chat-secondary",secondary:"border-transparent bg-chat-secondary text-white hover:bg-chat-secondary/80",destructive:"border-transparent bg-chat-error text-white shadow hover:bg-chat-error/90",outline:"text-foreground border-chat-border hover:bg-chat-accent/10"}},defaultVariants:{variant:"default"}});function P({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,E.cn)(O({variant:b}),a),...c})}let Q=({selectedUsers:a,onUsersChange:b,maxUsers:c=4,minUsers:e=2,disabled:f=!1})=>{let[g,i]=(0,h.useState)(""),[j,l]=(0,h.useState)(!1),m=(0,h.useRef)(null),{data:n,isLoading:o}=(0,H.m8)(g),p=(n||[]).filter(b=>!a.some(a=>a.id===b.id)),q=a.length>=c,r=a.length>=e;return(0,d.jsx)("div",{className:"relative w-full",children:(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[a.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(c=>(0,d.jsxs)(P,{variant:"secondary",className:"flex items-center gap-2 px-3 py-1",children:[(0,d.jsx)(w.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{className:"text-sm",children:c.username}),(0,d.jsx)("button",{type:"button",onClick:()=>{var d;return d=c.id,void b(a.filter(a=>a.id!==d))},className:"ml-1 hover:text-destructive",disabled:f,children:(0,d.jsx)(N.A,{className:"h-3 w-3"})})]},c.id))}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.length," / ",c," users selected",!r&&(0,d.jsxs)("span",{className:"text-destructive ml-2",children:["(Minimum ",e," users required)"]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(k.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,d.jsx)(A.p,{ref:m,type:"text",placeholder:"Search users by username...",value:g,onChange:a=>i(a.target.value),onFocus:()=>{p.length>0&&l(!0)},onBlur:()=>{setTimeout(()=>l(!1),200)},disabled:f||q,className:"pl-10 pr-4"}),o&&(0,d.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,d.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})]}),j&&p.length>0&&(0,d.jsx)("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-48 overflow-y-auto rounded-md border bg-popover shadow-lg",children:p.map(e=>(0,d.jsxs)("button",{type:"button",onClick:()=>{!(a.length>=c)&&(b([...a,e]),i(""),l(!1),m.current?.focus())},className:"flex w-full items-center gap-3 px-3 py-2 text-left hover:bg-accent focus:bg-accent focus:outline-none",children:[(0,d.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted",children:e.avatar?(0,d.jsx)("img",{src:e.avatar,alt:e.username,className:"h-8 w-8 rounded-full object-cover"}):(0,d.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:e.username}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:e.email})]})]},e.id))}),j&&g&&0===p.length&&!o&&(0,d.jsx)("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 rounded-md border bg-popover p-3 text-center text-sm text-muted-foreground shadow-lg",children:"No users found with that username"})]})})},R=(a={})=>{let{onSuccess:b,onError:c,showToast:d=!0,defaultType:i="group"}=a,{data:j}=(0,H.sg)(),{addGroupConversation:k,addDirectConversation:l}=(0,f.w)(a=>a),[m,n]=(0,h.useState)(!1),[o,p]=(0,h.useState)({name:"",type:i,selectedUsers:[]}),q=(0,e.CW)({onSuccess:a=>{d&&t.oR.success("Conversation created successfully");let c={id:a.id,name:a.name,ownerId:a.ownerId,type:"group"===o.type?g.ConversationType.GROUP:g.ConversationType.DIRECT,avatar:"",createdAt:a.createdAt||new Date};c.type===g.ConversationType.GROUP?k(c):l(c),u(),n(!1),b?.(c)},onError:a=>{d&&t.oR.error("Failed to create conversation"),n(!1),c?.(a)}}),r=a=>{if(!a.name.trim()&&"group"===a.type)return"Please enter a conversation name";if(a.name.length>0&&a.name.length<2)return"Conversation name must be at least 2 characters long";if(a.name.length>50)return"Conversation name cannot exceed 50 characters";if(!j?.id)return"User authentication required";if("group"===a.type){if(a.selectedUsers.length<2)return"Please select at least 2 users for the conversation";if(a.selectedUsers.length>4)return"Cannot select more than 4 users for a conversation"}else if("direct"===a.type&&1!==a.selectedUsers.length)return"Please select exactly 1 user for direct message";return"group"===a.type&&j&&!a.selectedUsers.some(a=>String(a.id)===j.id)?"You must include yourself when creating a conversation":null},s=async a=>{let b={...o,...a},c=r(b);if(c)return d&&t.oR.error(c),{success:!1,error:c};n(!0);try{let a=b.selectedUsers.map(a=>String(a.id)),c="direct"===b.type?[...a,j.id]:a,d={...b.name.trim()&&{name:b.name.trim()},type:b.type,userIds:[...new Set(c)]},e=await q.mutateAsync(d);return{success:!0,data:e}}catch(a){return{success:!1,error:a}}},u=()=>{p({name:"",type:i,selectedUsers:[]})};return{formData:o,loading:m,createConversation:s,updateFormData:a=>{p(b=>({...b,...a}))},updateSelectedUsers:a=>{p(b=>({...b,selectedUsers:a}))},resetForm:u,validateForm:a=>r(a||o),mutation:q}},S=a=>{let{openCreateConversation:b,setOpenCreateConversation:c,children:e}=a,{formData:f,loading:g,createConversation:h,updateFormData:i,updateSelectedUsers:j,resetForm:k}=R({defaultType:"group",onSuccess:()=>{c(!1)}}),l=async a=>{a.preventDefault(),await h()};return(0,d.jsxs)(z.lG,{open:b,onOpenChange:a=>{c(a),a||k()},children:[(0,d.jsx)(z.zM,{asChild:!0,children:(0,d.jsx)("div",{children:e})}),(0,d.jsxs)(z.Cf,{className:"sm:max-w-[500px]",children:[(0,d.jsx)(z.c7,{children:(0,d.jsx)(z.L3,{children:"Create Conversation"})}),(0,d.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:l,children:[(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsx)(G,{htmlFor:"name",className:"text-[12px] font-bold text-left",children:"CONVERSATION NAME"}),(0,d.jsx)(A.p,{id:"name",className:"col-span-3",placeholder:"Enter conversation name",value:f.name,onChange:a=>{i({name:a.target.value})}})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsx)(G,{className:"text-[12px] font-bold text-left",children:"SELECT USERS"}),(0,d.jsx)(Q,{selectedUsers:f.selectedUsers,onUsersChange:j,maxUsers:4,minUsers:2,disabled:g})]}),(0,d.jsxs)(z.Es,{children:[(0,d.jsx)(z.HM,{asChild:!0,children:(0,d.jsx)(B.$,{type:"button",variant:"secondary",children:"Cancel"})}),(0,d.jsx)(B.$,{type:"submit",variant:"default",disabled:g||f.selectedUsers.length<2,children:g?"Creating...":"Create Conversation"})]})]})]})]})};function T(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.n,{}),(0,d.jsx)(v.n,{}),(0,d.jsx)(v.n,{})]})}var U=c(29650),V=c(69417),W=c.n(V);let X=({convo:a,isActive:b})=>(0,d.jsx)(v.FX,{className:(0,E.cn)(b&&"bg-primary/10"),children:(0,d.jsxs)(v.Uj,{tooltip:a.name,children:[(0,d.jsx)(U.A,{}),(0,d.jsx)(W(),{href:`/messages/${a.id}`,children:(0,d.jsx)("span",{children:a.name})})]})}),Y=({items:a,loading:b})=>{let[c,e]=(0,h.useState)(!1),g=(0,f.w)(a=>a.activeConversationId);return(0,d.jsxs)(v.Cn,{children:[(0,d.jsx)(v.jj,{children:"Groups"}),(0,d.jsx)("div",{className:"flex gap-1",children:(0,d.jsx)(S,{openCreateConversation:c,setOpenCreateConversation:e,children:(0,d.jsxs)(v.O_,{onClick:()=>e(!0),children:[(0,d.jsx)(M.A,{})," ",(0,d.jsx)("span",{className:"sr-only",children:"Add Conversation"})]})})}),(0,d.jsx)(v.wZ,{children:b?(0,d.jsx)(T,{}):a.map(a=>(0,d.jsx)(X,{convo:a,isActive:a.id===g},a.id))})]})};var Z=c(32849);function $(){return(0,d.jsx)(d.Fragment,{children:Array.from({length:5}).map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center py-1.5 px-3 mb-1",children:[(0,d.jsx)("div",{className:"mr-3 flex items-center",children:(0,d.jsx)(Z.E,{className:"w-4 h-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0 flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsx)(Z.E,{className:"h-4 w-20 mb-1"})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[b%3==0&&(0,d.jsx)(Z.E,{className:"w-6 h-4"}),(0,d.jsx)(Z.E,{className:"w-12 h-3"})]})]})]},b))})}let _=a=>{let{openDirectMessage:b,setOpenDirectMessage:c,children:e}=a,g=(0,s.useRouter)(),{directConversations:i}=(0,f.w)(a=>a),{formData:j,loading:k,createConversation:l,updateSelectedUsers:m,resetForm:n}=R({defaultType:"direct",onSuccess:a=>{g.push(`/messages/${a.id}`),c(!1)}}),o=(0,h.useMemo)(()=>{if(1!==j.selectedUsers.length)return null;let a=j.selectedUsers[0];return a?i.find(b=>{if("direct"!==b.type)return!1;let c=a.email?.toLowerCase()||"";return b.name.toLowerCase()===c}):null},[j.selectedUsers,i]),p=async a=>{if(a.preventDefault(),o){g.push(`/messages/${o.id}`),c(!1);return}await l()};return(0,d.jsxs)(z.lG,{open:b,onOpenChange:a=>{c(a),a||n()},children:[(0,d.jsx)(z.zM,{asChild:!0,children:(0,d.jsx)("div",{children:e})}),(0,d.jsxs)(z.Cf,{className:"sm:max-w-[500px]",children:[(0,d.jsx)(z.c7,{children:(0,d.jsx)(z.L3,{children:"New Direct Message"})}),(0,d.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:p,children:[(0,d.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,d.jsx)(G,{className:"text-[12px] font-bold text-left",children:"SELECT USER"}),(0,d.jsx)(Q,{selectedUsers:j.selectedUsers,onUsersChange:a=>{m(a)},maxUsers:1,minUsers:1,disabled:k})]}),o&&1===j.selectedUsers.length&&(0,d.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,d.jsxs)("p",{className:"text-sm text-blue-800",children:["Direct message conversation already exists with ",j.selectedUsers[0]?.email,'. Click "Open Conversation" to join.']})}),(0,d.jsxs)(z.Es,{children:[(0,d.jsx)(z.HM,{asChild:!0,children:(0,d.jsx)(B.$,{type:"button",variant:"secondary",children:"Cancel"})}),(0,d.jsx)(B.$,{type:"submit",variant:"default",disabled:k||1!==j.selectedUsers.length,children:k?"Creating...":o?"Open Conversation":"Create Direct Message"})]})]})]})]})},aa=({convo:a,isActive:b})=>{let c=a.name.split("@")[0];return(0,d.jsx)(v.FX,{className:(0,E.cn)(b&&"bg-primary/10"),children:(0,d.jsxs)(W(),{href:`/messages/${a.id}`,className:"flex items-center cursor-pointer transition-colors rounded-md p-2 mb-1",children:[(0,d.jsx)("div",{className:"relative mr-3",children:(0,d.jsxs)(q.eu,{className:"w-8 h-8",children:[(0,d.jsx)(q.BK,{src:a.avatar}),(0,d.jsx)(q.q5,{color:"#8B5CF6",children:a.name.split(" ").map(a=>a[0]).join("")})]})}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,d.jsx)("h4",{className:"font-medium text-foreground text-sm truncate",children:c})})})]})})},ab=({items:a,loading:b})=>{let[c,e]=(0,h.useState)(!1),g=(0,f.w)(a=>a.activeConversationId);return(0,d.jsxs)(v.Cn,{children:[(0,d.jsx)(v.jj,{children:"Direct Messages"}),(0,d.jsx)("div",{className:"flex gap-1",children:(0,d.jsx)(_,{openDirectMessage:c,setOpenDirectMessage:e,children:(0,d.jsxs)(v.O_,{onClick:()=>e(!0),children:[(0,d.jsx)(M.A,{})," ",(0,d.jsx)("span",{className:"sr-only",children:"Direct Message"})]})})}),(0,d.jsx)(v.wZ,{children:b?(0,d.jsx)($,{}):a.map(a=>(0,d.jsx)(aa,{convo:a,isActive:a.id===g},a.id))})]})},ac=()=>{let{searchQuery:a,setSearchQuery:b,filteredConversations:c,filteredDirectMessages:g,isConversationsLoading:l}=(a=>{let{searchQuery:b,setSearchQuery:c,clearSearch:d}=(()=>{let[a,b]=(0,h.useState)("");return{searchQuery:a,setSearchQuery:b,clearSearch:()=>b("")}})(),{isConversationsLoading:g,conversationsError:j,refetchConversations:k}=(()=>{let{setGroupConversations:a,setDirectConversations:b}=(0,f.w)(),{data:c,isLoading:d,error:g,refetch:j}=(0,e.SW)();return(0,h.useEffect)(()=>{if(c){let d=i(c.group||[],"group"),e=i(c.direct||[],"direct");a(d),b(e)}else a([]),b([])},[c,a,b]),{isConversationsLoading:d,conversationsError:g,refetchConversations:j}})(),{filteredConversations:l,filteredDirectMessages:m}=(a=>{let{groupConversations:b,directConversations:c}=(0,f.w)();return{filteredConversations:(0,h.useMemo)(()=>b.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),[b,a]),filteredDirectMessages:(0,h.useMemo)(()=>c.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),[c,a])}})(b);return{searchQuery:b,setSearchQuery:c,clearSearch:d,filteredConversations:l,filteredDirectMessages:m,isConversationsLoading:g,conversationsError:j,refetchConversations:k,webSocketConnection:null}})();return(0,d.jsxs)(v.Bx,{className:"border-chat-border",children:[(0,d.jsx)(v.Gh,{className:"p-chat-outer",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,d.jsx)(A.p,{placeholder:"Search conversations...",value:a,onChange:a=>b(a.target.value),className:"pl-10 border-chat-border rounded-chat focus:border-chat-primary transition-colors"})]})}),(0,d.jsxs)(v.Yv,{className:"px-chat-gutter",children:[(0,d.jsx)(Y,{items:c,loading:l}),(0,d.jsx)(j.wv,{className:"mx-4 bg-chat-border"}),(0,d.jsx)(ab,{items:g,loading:l})]}),(0,d.jsx)(v.CG,{className:"p-chat-outer border-t border-chat-border",children:(0,d.jsx)(L,{})})]})}},92665:()=>{},99814:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(1404).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/organisms/AppSidebar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ericnguyen/DATA_ERIC/Workspace/Backend/go/Notify/apps/web/src/components/organisms/AppSidebar.tsx","default")}};